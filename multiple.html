<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€æ•¸åˆ¤æ–·é—–é—œéŠæˆ²</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .title {
            text-align: center;
            margin-bottom: 30px;
        }

        .title h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .level-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .level-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
        }

        .level-1 { background-color: #4caf50; }
        .level-2 { background-color: #2196f3; }
        .level-3 { background-color: #9c27b0; }
        .level-inactive { background-color: #ccc; }
        .level-completed { background-color: #66bb6a; }

        .game-area {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            padding: 40px;
            text-align: center;
        }

        .question-info {
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .timer {
            margin: 30px 0;
        }

        .timer-display {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .timer-bar {
            width: 100%;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            transition: width 1s linear;
        }

        .timer-safe { color: #4caf50; background-color: #4caf50; }
        .timer-warning { color: #ff9800; background-color: #ff9800; }
        .timer-danger { 
            color: #f44336; 
            background-color: #f44336;
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .number-display {
            font-size: 4rem;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #333;
            background-color: #f5f5f5;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .question-text {
            font-size: 1.5rem;
            color: #555;
            margin-bottom: 40px;
        }

        .question-text .multiple {
            font-weight: bold;
            color: #2196f3;
        }

        .answer-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .btn {
            font-size: 1.3rem;
            font-weight: bold;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-yes {
            background-color: #4caf50;
            color: white;
        }

        .btn-yes:hover:not(:disabled) {
            background-color: #45a049;
        }

        .btn-no {
            background-color: #f44336;
            color: white;
        }

        .btn-no:hover:not(:disabled) {
            background-color: #da190b;
        }

        .btn-primary {
            background-color: #2196f3;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1976d2;
        }

        .btn-purple {
            background-color: #9c27b0;
            color: white;
        }

        .btn-purple:hover {
            background-color: #7b1fa2;
        }

        .feedback {
            font-size: 1.3rem;
            font-weight: bold;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .feedback-correct {
            background-color: #e8f5e8;
            color: #2e7d32;
        }

        .feedback-incorrect {
            background-color: #ffebee;
            color: #c62828;
        }

        .feedback-timeout {
            background-color: #fff3e0;
            color: #ef6c00;
        }

        .completion-screen {
            text-align: center;
        }

        .completion-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .completion-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .completion-score {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 30px;
        }

        .game-rules {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
        }

        .game-rules h3 {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .game-rules ul {
            list-style: none;
            color: #666;
        }

        .game-rules li {
            margin-bottom: 8px;
            padding-left: 10px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ¨™é¡Œ -->
        <div class="title">
            <h1>å€æ•¸åˆ¤æ–·é—–é—œéŠæˆ²</h1>
            <div class="stats">
                <div class="stat-item">
                    <span>â­</span>
                    <span>ç¸½åˆ†: <span id="totalScore">0</span></span>
                </div>
                <div class="stat-item">
                    <span>ğŸ†</span>
                    <span>ç¬¬ <span id="currentLevel">1</span> é—œ</span>
                </div>
            </div>
        </div>

        <!-- é—œå¡é€²åº¦ -->
        <div class="level-progress">
            <div class="level-circle level-1" id="level1">1</div>
            <div class="level-circle level-inactive" id="level2">2</div>
            <div class="level-circle level-inactive" id="level3">3</div>
        </div>

        <!-- éŠæˆ²å€åŸŸ -->
        <div class="game-area">
            <!-- éŠæˆ²é€²è¡Œä¸­ -->
            <div id="playingScreen">
                <!-- é¡Œç›®è³‡è¨Š -->
                <div class="question-info">
                    <div>ç¬¬ <span id="levelDisplay">1</span> é—œ - ç¬¬ <span id="questionNumber">1</span> é¡Œ / 6 é¡Œ</div>
                    <div>æœ¬é—œåˆ†æ•¸: <span id="levelScore">0</span> / 6</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    
                    <!-- è¨ˆæ™‚å™¨ -->
                    <div class="timer">
                        <div class="timer-display timer-safe" id="timerDisplay">10 ç§’</div>
                        <div class="timer-bar">
                            <div class="timer-fill timer-safe" id="timerFill"></div>
                        </div>
                    </div>
                </div>

                <!-- é¡Œç›® -->
                <div>
                    <div class="number-display" id="numberDisplay">123</div>
                    <div class="question-text">
                        é€™å€‹æ•¸å­—æ˜¯ <span class="multiple" id="multipleDisplay">2</span> çš„å€æ•¸å—ï¼Ÿ
                    </div>

                    <!-- ç­”æ¡ˆæŒ‰éˆ• -->
                    <div class="answer-buttons" id="answerButtons">
                        <button class="btn btn-yes" id="yesBtn" onclick="checkAnswer(true)">
                            âœ“ æ˜¯
                        </button>
                        <button class="btn btn-no" id="noBtn" onclick="checkAnswer(false)">
                            âœ— ä¸æ˜¯
                        </button>
                    </div>

                    <!-- ç­”æ¡ˆåé¥‹ -->
                    <div class="feedback hidden" id="feedback"></div>
                </div>
            </div>

            <!-- é—œå¡å®Œæˆç•«é¢ -->
            <div id="levelCompleteScreen" class="completion-screen hidden">
                <div class="completion-icon">ğŸ†</div>
                <div class="completion-title">ç¬¬ <span id="completedLevel">1</span> é—œå®Œæˆï¼</div>
                <div class="completion-score">æœ¬é—œåˆ†æ•¸: <span id="completedScore">0</span> / 6</div>
                <button class="btn btn-primary" onclick="nextLevel()">
                    â¡ï¸ é€²å…¥ç¬¬ <span id="nextLevelNumber">2</span> é—œ
                </button>
            </div>

            <!-- éŠæˆ²å®Œæˆç•«é¢ -->
            <div id="gameCompleteScreen" class="completion-screen hidden">
                <div class="completion-icon">ğŸ‰</div>
                <div class="completion-title">æ­å–œå®Œæˆæ‰€æœ‰é—œå¡ï¼</div>
                <div class="completion-score">ç¸½åˆ†: <span id="finalTotalScore">0</span> / 18</div>
                <div class="completion-score">æœ€çµ‚é—œå¡åˆ†æ•¸: <span id="finalLevelScore">0</span> / 6</div>
                <button class="btn btn-purple" onclick="restartGame()">
                    ğŸ”„ é‡æ–°é–‹å§‹
                </button>
            </div>
        </div>

        <!-- éŠæˆ²èªªæ˜ -->
        <div class="game-rules">
            <h3>éŠæˆ²è¦å‰‡ï¼š</h3>
            <ul>
                <li>â€¢ ç¬¬ä¸€é—œï¼š3ä½æ•¸ï¼Œ6é¡Œ</li>
                <li>â€¢ ç¬¬äºŒé—œï¼š4ä½æ•¸ï¼Œ6é¡Œ</li>
                <li>â€¢ ç¬¬ä¸‰é—œï¼š6ä½æ•¸ï¼Œ6é¡Œ</li>
                <li>â€¢ æ¯é¡Œé™æ™‚ 10 ç§’ä½œç­”</li>
                <li>â€¢ æ¯é¡Œéš¨æ©Ÿé¸æ“‡å€æ•¸ï¼š2, 4, 5, 8, 10, 11</li>
                <li>â€¢ åˆ¤æ–·æ•¸å­—æ˜¯å¦ç‚ºæŒ‡å®šå€æ•¸</li>
            </ul>
        </div>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let currentLevel = 1;
        let currentQuestion = 1;
        let levelScore = 0;
        let totalScore = 0;
        let currentNumber = '';
        let currentMultiple = 2;
        let timeLeft = 10;
        let timerInterval = null;
        let timerActive = false;
        let showingFeedback = false;

        // éŠæˆ²è¨­å®š
        const gameConfig = {
            1: { digits: 3, questionsPerLevel: 6 },
            2: { digits: 4, questionsPerLevel: 6 },
            3: { digits: 6, questionsPerLevel: 6 }
        };

        const multiples = [2, 4, 5, 8, 10, 11];
        const levelColors = {
            1: '#4caf50',
            2: '#2196f3', 
            3: '#9c27b0'
        };

        // ç”¢ç”ŸæŒ‡å®šä½æ•¸çš„éš¨æ©Ÿæ•¸å­—
        function generateRandomNumber(digits) {
            const min = Math.pow(10, digits - 1);
            const max = Math.pow(10, digits) - 1;
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // ç”¢ç”Ÿæ–°é¡Œç›®
        function generateNewQuestion() {
            const config = gameConfig[currentLevel];
            const newNumber = generateRandomNumber(config.digits);
            const randomMultiple = multiples[Math.floor(Math.random() * multiples.length)];
            
            currentNumber = newNumber.toString();
            currentMultiple = randomMultiple;
            showingFeedback = false;
            
            // æ›´æ–°é¡¯ç¤º
            document.getElementById('numberDisplay').textContent = currentNumber;
            document.getElementById('multipleDisplay').textContent = currentMultiple;
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('answerButtons').style.display = 'flex';
            
            // å•Ÿå‹•è¨ˆæ™‚å™¨
            startTimer();
            updateDisplay();
        }

        // å•Ÿå‹•è¨ˆæ™‚å™¨
        function startTimer() {
            timeLeft = 10;
            timerActive = true;
            updateTimerDisplay();
            
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    handleTimeout();
                }
            }, 1000);
        }

        // æ›´æ–°è¨ˆæ™‚å™¨é¡¯ç¤º
        function updateTimerDisplay() {
            const timerDisplay = document.getElementById('timerDisplay');
            const timerFill = document.getElementById('timerFill');
            
            timerDisplay.textContent = timeLeft + ' ç§’';
            timerFill.style.width = (timeLeft / 10) * 100 + '%';
            
            // æ›´æ–°é¡è‰²
            let colorClass = 'timer-safe';
            if (timeLeft <= 3) {
                colorClass = 'timer-danger';
            } else if (timeLeft <= 5) {
                colorClass = 'timer-warning';
            }
            
            timerDisplay.className = 'timer-display ' + colorClass;
            timerFill.className = 'timer-fill ' + colorClass;
        }

        // æ™‚é–“åˆ°è™•ç†
        function handleTimeout() {
            if (showingFeedback) return;
            
            timerActive = false;
            clearInterval(timerInterval);
            
            const number = parseInt(currentNumber);
            const isMultiple = number % currentMultiple === 0;
            const feedbackText = `æ™‚é–“åˆ°ï¼${currentNumber} ${isMultiple ? 'æ˜¯' : 'ä¸æ˜¯'} ${currentMultiple} çš„å€æ•¸`;
            
            showFeedback(feedbackText, 'timeout');
            disableButtons();
            
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }

        // æª¢æŸ¥ç­”æ¡ˆ
        function checkAnswer(userAnswer) {
            if (showingFeedback || !timerActive) return;
            
            timerActive = false;
            clearInterval(timerInterval);
            
            const number = parseInt(currentNumber);
            const isCorrect = (number % currentMultiple === 0) === userAnswer;
            
            let feedbackText;
            let feedbackType;
            
            if (isCorrect) {
                levelScore++;
                totalScore++;
                feedbackText = 'æ­£ç¢ºï¼';
                feedbackType = 'correct';
            } else {
                feedbackText = `éŒ¯èª¤ï¼${currentNumber} ${number % currentMultiple === 0 ? 'æ˜¯' : 'ä¸æ˜¯'} ${currentMultiple} çš„å€æ•¸`;
                feedbackType = 'incorrect';
            }
            
            showFeedback(feedbackText, feedbackType);
            disableButtons();
            updateDisplay();
            
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }

        // é¡¯ç¤ºåé¥‹
        function showFeedback(text, type) {
            showingFeedback = true;
            const feedback = document.getElementById('feedback');
            feedback.textContent = text;
            feedback.className = 'feedback feedback-' + type;
            feedback.classList.remove('hidden');
        }

        // ç¦ç”¨æŒ‰éˆ•
        function disableButtons() {
            document.getElementById('yesBtn').disabled = true;
            document.getElementById('noBtn').disabled = true;
        }

        // å•Ÿç”¨æŒ‰éˆ•
        function enableButtons() {
            document.getElementById('yesBtn').disabled = false;
            document.getElementById('noBtn').disabled = false;
        }

        // ä¸‹ä¸€é¡Œ
        function nextQuestion() {
            const config = gameConfig[currentLevel];
            
            if (currentQuestion < config.questionsPerLevel) {
                currentQuestion++;
                enableButtons();
                generateNewQuestion();
            } else {
                // é—œå¡å®Œæˆ
                if (currentLevel < 3) {
                    showLevelComplete();
                } else {
                    showGameComplete();
                }
            }
        }

        // é¡¯ç¤ºé—œå¡å®Œæˆ
        function showLevelComplete() {
            document.getElementById('playingScreen').classList.add('hidden');
            document.getElementById('levelCompleteScreen').classList.remove('hidden');
            document.getElementById('completedLevel').textContent = currentLevel;
            document.getElementById('completedScore').textContent = levelScore;
            document.getElementById('nextLevelNumber').textContent = currentLevel + 1;
        }

        // é€²å…¥ä¸‹ä¸€é—œ
        function nextLevel() {
            currentLevel++;
            currentQuestion = 1;
            levelScore = 0;
            
            // æ›´æ–°é—œå¡é€²åº¦é¡¯ç¤º
            updateLevelProgress();
            
            document.getElementById('levelCompleteScreen').classList.add('hidden');
            document.getElementById('playingScreen').classList.remove('hidden');
            
            enableButtons();
            generateNewQuestion();
        }

        // é¡¯ç¤ºéŠæˆ²å®Œæˆ
        function showGameComplete() {
            document.getElementById('playingScreen').classList.add('hidden');
            document.getElementById('gameCompleteScreen').classList.remove('hidden');
            document.getElementById('finalTotalScore').textContent = totalScore;
            document.getElementById('finalLevelScore').textContent = levelScore;
        }

        // é‡æ–°é–‹å§‹éŠæˆ²
        function restartGame() {
            currentLevel = 1;
            currentQuestion = 1;
            levelScore = 0;
            totalScore = 0;
            
            document.getElementById('gameCompleteScreen').classList.add('hidden');
            document.getElementById('playingScreen').classList.remove('hidden');
            
            updateLevelProgress();
            updateDisplay();
            enableButtons();
            generateNewQuestion();
        }

        // æ›´æ–°é¡¯ç¤º
        function updateDisplay() {
            document.getElementById('currentLevel').textContent = currentLevel;
            document.getElementById('levelDisplay').textContent = currentLevel;
            document.getElementById('questionNumber').textContent = currentQuestion;
            document.getElementById('levelScore').textContent = levelScore;
            document.getElementById('totalScore').textContent = totalScore;
            
            // æ›´æ–°é€²åº¦æ¢
            const config = gameConfig[currentLevel];
            const progressPercent = (currentQuestion / config.questionsPerLevel) * 100;
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = progressPercent + '%';
            progressFill.style.backgroundColor = levelColors[currentLevel];
        }

        // æ›´æ–°é—œå¡é€²åº¦
        function updateLevelProgress() {
            for (let i = 1; i <= 3; i++) {
                const levelCircle = document.getElementById('level' + i);
                if (i === currentLevel) {
                    levelCircle.className = 'level-circle level-' + i;
                } else if (i < currentLevel) {
                    levelCircle.className = 'level-circle level-completed';
                } else {
                    levelCircle.className = 'level-circle level-inactive';
                }
            }
        }

        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            updateLevelProgress();
            updateDisplay();
            generateNewQuestion();
        }

        // éŠæˆ²é–‹å§‹
        initGame();
    </script>
</body>
</html>
