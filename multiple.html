<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÂÄçÊï∏Âà§Êñ∑ÈóñÈóúÈÅäÊà≤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
        }

        .title {
            text-align: center;
            margin-bottom: 30px;
        }

        .title h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: bold;
        }

        .level-progress {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }

        .level-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            font-weight: bold;
            color: white;
            font-size: 1.2rem;
        }

        .level-1 { background-color: #4caf50; }
        .level-2 { background-color: #2196f3; }
        .level-3 { background-color: #9c27b0; }
        .level-inactive { background-color: #ccc; }
        .level-completed { background-color: #66bb6a; }

        .game-area {
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            padding: 40px;
            text-align: center;
        }

        .question-info {
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .timer {
            margin: 30px 0;
        }

        .timer-display {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .timer-bar {
            width: 100%;
            height: 12px;
            background-color: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
        }

        .timer-fill {
            height: 100%;
            transition: width 1s linear;
        }

        .timer-safe { color: #4caf50; background-color: #4caf50; }
        .timer-warning { color: #ff9800; background-color: #ff9800; }
        .timer-danger { 
            color: #f44336; 
            background-color: #f44336;
            animation: pulse 0.5s infinite alternate;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            100% { opacity: 0.7; }
        }

        .number-display {
            font-size: 4rem;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #333;
            background-color: #f5f5f5;
            padding: 30px;
            border-radius: 10px;
            margin: 30px 0;
        }

        .question-text {
            font-size: 1.5rem;
            color: #555;
            margin-bottom: 40px;
        }

        .question-text .multiple {
            font-weight: bold;
            color: #2196f3;
        }

        .answer-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
        }

        .btn {
            font-size: 1.3rem;
            font-weight: bold;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-yes {
            background-color: #4caf50;
            color: white;
        }

        .btn-yes:hover:not(:disabled) {
            background-color: #45a049;
        }

        .btn-no {
            background-color: #f44336;
            color: white;
        }

        .btn-no:hover:not(:disabled) {
            background-color: #da190b;
        }

        .btn-primary {
            background-color: #2196f3;
            color: white;
        }

        .btn-primary:hover {
            background-color: #1976d2;
        }

        .btn-purple {
            background-color: #9c27b0;
            color: white;
        }

        .btn-purple:hover {
            background-color: #7b1fa2;
        }

        .feedback {
            font-size: 1.3rem;
            font-weight: bold;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .feedback-correct {
            background-color: #e8f5e8;
            color: #2e7d32;
        }

        .feedback-incorrect {
            background-color: #ffebee;
            color: #c62828;
        }

        .feedback-timeout {
            background-color: #fff3e0;
            color: #ef6c00;
        }

        .completion-screen {
            text-align: center;
        }

        .completion-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .completion-title {
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
        }

        .completion-score {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 30px;
        }

        .game-rules {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
        }

        .game-rules h3 {
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .game-rules ul {
            list-style: none;
            color: #666;
        }

        .game-rules li {
            margin-bottom: 8px;
            padding-left: 10px;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Ê®ôÈ°å -->
        <div class="title">
            <h1>ÂÄçÊï∏Âà§Êñ∑ÈóñÈóúÈÅäÊà≤</h1>
            <div class="stats">
                <div class="stat-item">
                    <span>‚≠ê</span>
                    <span>Á∏ΩÂàÜ: <span id="totalScore">0</span></span>
                </div>
                <div class="stat-item">
                    <span>üèÜ</span>
                    <span>Á¨¨ <span id="currentLevel">1</span> Èóú</span>
                </div>
            </div>
        </div>

        <!-- ÈóúÂç°ÈÄ≤Â∫¶ -->
        <div class="level-progress">
            <div class="level-circle level-1" id="level1">1</div>
            <div class="level-circle level-inactive" id="level2">2</div>
            <div class="level-circle level-inactive" id="level3">3</div>
        </div>

        <!-- ÈÅäÊà≤ÂçÄÂüü -->
        <div class="game-area">
            <!-- ÈÅäÊà≤ÈÄ≤Ë°å‰∏≠ -->
            <div id="playingScreen">
                <!-- È°åÁõÆË≥áË®ä -->
                <div class="question-info">
                    <div>Á¨¨ <span id="levelDisplay">1</span> Èóú - Á¨¨ <span id="questionNumber">1</span> È°å / 6 È°å</div>
                    <div>Êú¨ÈóúÂàÜÊï∏: <span id="levelScore">0</span> / 6</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    
                    <!-- Ë®àÊôÇÂô® -->
                    <div class="timer">
                        <div class="timer-display timer-safe" id="timerDisplay">10 Áßí</div>
                        <div class="timer-bar">
                            <div class="timer-fill timer-safe" id="timerFill"></div>
                        </div>
                    </div>
                </div>

                <!-- È°åÁõÆ -->
                <div>
                    <div class="number-display" id="numberDisplay">123</div>
                    <div class="question-text">
                        ÈÄôÂÄãÊï∏Â≠óÊòØ <span class="multiple" id="multipleDisplay">2</span> ÁöÑÂÄçÊï∏ÂóéÔºü
                    </div>

                    <!-- Á≠îÊ°àÊåâÈàï -->
                    <div class="answer-buttons" id="answerButtons">
                        <button class="btn btn-yes" id="yesBtn" onclick="checkAnswer(true)">
                            ‚úì ÊòØ
                        </button>
                        <button class="btn btn-no" id="noBtn" onclick="checkAnswer(false)">
                            ‚úó ‰∏çÊòØ
                        </button>
                    </div>

                    <!-- Á≠îÊ°àÂèçÈ•ã -->
                    <div class="feedback hidden" id="feedback"></div>
                </div>
            </div>

            <!-- ÈóúÂç°ÂÆåÊàêÁï´Èù¢ -->
            <div id="levelCompleteScreen" class="completion-screen hidden">
                <div class="completion-icon">üèÜ</div>
                <div class="completion-title">Á¨¨ <span id="completedLevel">1</span> ÈóúÂÆåÊàêÔºÅ</div>
                <div class="completion-score">Êú¨ÈóúÂàÜÊï∏: <span id="completedScore">0</span> / 6</div>
                <button class="btn btn-primary" onclick="nextLevel()">
                    ‚û°Ô∏è ÈÄ≤ÂÖ•Á¨¨ <span id="nextLevelNumber">2</span> Èóú
                </button>
            </div>

            <!-- ÈÅäÊà≤ÂÆåÊàêÁï´Èù¢ -->
            <div id="gameCompleteScreen" class="completion-screen hidden">
                <div class="completion-icon">üéâ</div>
                <div class="completion-title">ÊÅ≠ÂñúÂÆåÊàêÊâÄÊúâÈóúÂç°ÔºÅ</div>
                <div class="completion-score">Á∏ΩÂàÜ: <span id="finalTotalScore">0</span> / 18</div>
                <div class="completion-score">ÊúÄÁµÇÈóúÂç°ÂàÜÊï∏: <span id="finalLevelScore">0</span> / 6</div>
                <button class="btn btn-purple" onclick="restartGame()">
                    üîÑ ÈáçÊñ∞ÈñãÂßã
                </button>
            </div>
        </div>

        <!-- ÈÅäÊà≤Ë™™Êòé -->
        <div class="game-rules">
            <h3>ÈÅäÊà≤Ë¶èÂâáÔºö</h3>
            <ul>
                <li>‚Ä¢ Á¨¨‰∏ÄÈóúÔºö3‰ΩçÊï∏Ôºå6È°å</li>
                <li>‚Ä¢ Á¨¨‰∫åÈóúÔºö4‰ΩçÊï∏Ôºå6È°å</li>
                <li>‚Ä¢ Á¨¨‰∏âÈóúÔºö6‰ΩçÊï∏Ôºå6È°å</li>
                <li>‚Ä¢ ÊØèÈ°åÈôêÊôÇ 10 Áßí‰ΩúÁ≠î</li>
                <li>‚Ä¢ ÊØèÈ°åÈö®Ê©üÈÅ∏ÊìáÂÄçÊï∏Ôºö2, 4, 5, 8, 10, 11</li>
                <li>‚Ä¢ Âà§Êñ∑Êï∏Â≠óÊòØÂê¶ÁÇ∫ÊåáÂÆöÂÄçÊï∏</li>
            </ul>
        </div>
    </div>

    <script>
        // ÈÅäÊà≤ÁãÄÊÖã
        let currentLevel = 1;
        let currentQuestion = 1;
        let levelScore = 0;
        let totalScore = 0;
        let currentNumber = '';
        let currentMultiple = 2;
        let timeLeft = 10;
        let timerInterval = null;
        let timerActive = false;
        let showingFeedback = false;

        // ÈÅäÊà≤Ë®≠ÂÆö
        const gameConfig = {
            1: { digits: 3, questionsPerLevel: 6 },
            2: { digits: 4, questionsPerLevel: 6 },
            3: { digits: 6, questionsPerLevel: 6 }
        };

        const multiples = [2, 4, 5, 8, 10, 11];
        const levelColors = {
            1: '#4caf50',
            2: '#2196f3', 
            3: '#9c27b0'
        };

        // Áî¢ÁîüÊåáÂÆö‰ΩçÊï∏ÁöÑÈö®Ê©üÊï∏Â≠ó
        function generateRandomNumber(digits) {
            const min = Math.pow(10, digits - 1);
            const max = Math.pow(10, digits) - 1;
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // Áî¢ÁîüÊñ∞È°åÁõÆ
        function generateNewQuestion() {
            const config = gameConfig[currentLevel];
            const newNumber = generateRandomNumber(config.digits);
            const randomMultiple = multiples[Math.floor(Math.random() * multiples.length)];
            
            currentNumber = newNumber.toString();
            currentMultiple = randomMultiple;
            showingFeedback = false;
            
            // Êõ¥Êñ∞È°ØÁ§∫
            document.getElementById('numberDisplay').textContent = currentNumber;
            document.getElementById('multipleDisplay').textContent = currentMultiple;
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('answerButtons').style.display = 'flex';
            
            // ÂïüÂãïË®àÊôÇÂô®
            startTimer();
            updateDisplay();
        }

        // ÂïüÂãïË®àÊôÇÂô®
        function startTimer() {
            timeLeft = 10;
            timerActive = true;
            updateTimerDisplay();
            
            if (timerInterval) clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    handleTimeout();
                }
            }, 1000);
        }

        // Êõ¥Êñ∞Ë®àÊôÇÂô®È°ØÁ§∫
        function updateTimerDisplay() {
            const timerDisplay = document.getElementById('timerDisplay');
            const timerFill = document.getElementById('timerFill');
            
            timerDisplay.textContent = timeLeft + ' Áßí';
            timerFill.style.width = (timeLeft / 10) * 100 + '%';
            
            // Êõ¥Êñ∞È°èËâ≤
            let colorClass = 'timer-safe';
            if (timeLeft <= 3) {
                colorClass = 'timer-danger';
            } else if (timeLeft <= 5) {
                colorClass = 'timer-warning';
            }
            
            timerDisplay.className = 'timer-display ' + colorClass;
            timerFill.className = 'timer-fill ' + colorClass;
        }

        // ÊôÇÈñìÂà∞ËôïÁêÜ
        function handleTimeout() {
            if (showingFeedback) return;
            
            timerActive = false;
            clearInterval(timerInterval);
            
            const number = parseInt(currentNumber);
            const isMultiple = number % currentMultiple === 0;
            const feedbackText = `ÊôÇÈñìÂà∞ÔºÅ${currentNumber} ${isMultiple ? 'ÊòØ' : '‰∏çÊòØ'} ${currentMultiple} ÁöÑÂÄçÊï∏`;
            
            showFeedback(feedbackText, 'timeout');
            disableButtons();
            
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }

        // Ê™¢Êü•Á≠îÊ°à
        function checkAnswer(userAnswer) {
            if (showingFeedback || !timerActive) return;
            
            timerActive = false;
            clearInterval(timerInterval);
            
            const number = parseInt(currentNumber);
            const isCorrect = (number % currentMultiple === 0) === userAnswer;
            
            let feedbackText;
            let feedbackType;
            
            if (isCorrect) {
                levelScore++;
                totalScore++;
                feedbackText = 'Ê≠£Á¢∫ÔºÅ';
                feedbackType = 'correct';
            } else {
                feedbackText = `ÈåØË™§ÔºÅ${currentNumber} ${number % currentMultiple === 0 ? 'ÊòØ' : '‰∏çÊòØ'} ${currentMultiple} ÁöÑÂÄçÊï∏`;
                feedbackType = 'incorrect';
            }
            
            showFeedback(feedbackText, feedbackType);
            disableButtons();
            updateDisplay();
            
            setTimeout(() => {
                nextQuestion();
            }, 2000);
        }

        // È°ØÁ§∫ÂèçÈ•ã
        function showFeedback(text, type) {
            showingFeedback = true;
            const feedback = document.getElementById('feedback');
            feedback.textContent = text;
            feedback.className = 'feedback feedback-' + type;
            feedback.classList.remove('hidden');
        }

        // Á¶ÅÁî®ÊåâÈàï
        function disableButtons() {
            document.getElementById('yesBtn').disabled = true;
            document.getElementById('noBtn').disabled = true;
        }

        // ÂïüÁî®ÊåâÈàï
        function enableButtons() {
            document.getElementById('yesBtn').disabled = false;
            document.getElementById('noBtn').disabled = false;
        }

        // ‰∏ã‰∏ÄÈ°å
        function nextQuestion() {
            const config = gameConfig[currentLevel];
            
            if (currentQuestion < config.questionsPerLevel) {
                currentQuestion++;
                enableButtons();
                generateNewQuestion();
            } else {
                // ÈóúÂç°ÂÆåÊàê
                if (currentLevel < 3) {
                    showLevelComplete();
                } else {
                    showGameComplete();
                }
            }
        }

        // È°ØÁ§∫ÈóúÂç°ÂÆåÊàê
        function showLevelComplete() {
            document.getElementById('playingScreen').classList.add('hidden');
            document.getElementById('levelCompleteScreen').classList.remove('hidden');
            document.getElementById('completedLevel').textContent = currentLevel;
            document.getElementById('completedScore').textContent = levelScore;
            document.getElementById('nextLevelNumber').textContent = currentLevel + 1;
        }

        // ÈÄ≤ÂÖ•‰∏ã‰∏ÄÈóú
        function nextLevel() {
            currentLevel++;
            currentQuestion = 1;
            levelScore = 0;
            
            // Êõ¥Êñ∞ÈóúÂç°ÈÄ≤Â∫¶È°ØÁ§∫
            updateLevelProgress();
            
            document.getElementById('levelCompleteScreen').classList.add('hidden');
            document.getElementById('playingScreen').classList.remove('hidden');
            
            enableButtons();
            generateNewQuestion();
        }

        // È°ØÁ§∫ÈÅäÊà≤ÂÆåÊàê
        function showGameComplete() {
            document.getElementById('playingScreen').classList.add('hidden');
            document.getElementById('gameCompleteScreen').classList.remove('hidden');
            document.getElementById('finalTotalScore').textContent = totalScore;
            document.getElementById('finalLevelScore').textContent = levelScore;
        }

        // ÈáçÊñ∞ÈñãÂßãÈÅäÊà≤
        function restartGame() {
            currentLevel = 1;
            currentQuestion = 1;
            levelScore = 0;
            totalScore = 0;
            
            document.getElementById('gameCompleteScreen').classList.add('hidden');
            document.getElementById('playingScreen').classList.remove('hidden');
            
            updateLevelProgress();
            updateDisplay();
            enableButtons();
            generateNewQuestion();
        }

        // Êõ¥Êñ∞È°ØÁ§∫
        function updateDisplay() {
            document.getElementById('currentLevel').textContent = currentLevel;
            document.getElementById('levelDisplay').textContent = currentLevel;
            document.getElementById('questionNumber').textContent = currentQuestion;
            document.getElementById('levelScore').textContent = levelScore;
            document.getElementById('totalScore').textContent = totalScore;
            
            // Êõ¥Êñ∞ÈÄ≤Â∫¶Ê¢ù
            const config = gameConfig[currentLevel];
            const progressPercent = (currentQuestion / config.questionsPerLevel) * 100;
            const progressFill = document.getElementById('progressFill');
            progressFill.style.width = progressPercent + '%';
            progressFill.style.backgroundColor = levelColors[currentLevel];
        }

        // Êõ¥Êñ∞ÈóúÂç°ÈÄ≤Â∫¶
        function updateLevelProgress() {
            for (let i = 1; i <= 3; i++) {
                const levelCircle = document.getElementById('level' + i);
                if (i === currentLevel) {
                    levelCircle.className = 'level-circle level-' + i;
                } else if (i < currentLevel) {
                    levelCircle.className = 'level-circle level-completed';
                } else {
                    levelCircle.className = 'level-circle level-inactive';
                }
            }
        }

        // ÂàùÂßãÂåñÈÅäÊà≤
        function initGame() {
            updateLevelProgress();
            updateDisplay();
            generateNewQuestion();
        }

        // ÈÅäÊà≤ÈñãÂßã
        initGame();
    </script>
</body>
</html>
